build: 
  context: {{ dockerfile_context }}
  args:
    {% for key, value in build_arguments.items() %}
      - {{key}}={{value}}
    {% endfor %}
  target: fenics_adapter
  cache_from:
  - type=gha
  cache_to:
  - type=gha,mode=max
depends_on:    
  prepare:
    condition: service_completed_successfully
volumes:
  - {{ run_directory }}:/runs
user: ${UID}:${GID}
command: >
  /bin/bash -c "id && 
  cd '/runs/{{ tutorial_folder }}/{{ case_folder }}' &&
  {{ run }} | tee {{ case_folder }}.log 2>&1"
